<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Generation</title>
    <style>
        #output-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-top: 20px;
        }

        .output-image {
            margin: 10px;
        }
    </style>
</head>
<body>

<button onclick="generateImages()">Generate Images</button>
<div id="output-container"></div>

<script>
    function generateImages() {
        const url = "http://localhost:8888/generate_images";
        fetch(url, { method: "POST" })
            .then(response => response.json())
            .then(data => displayImages(data.images, data.bboxes))
            .catch(error => console.error("Error:", error));
    }

    function displayImages(images, bboxes) {
        const outputContainer = document.getElementById("output-container");
        outputContainer.innerHTML = "";

        for (let i = 0; i < images.length; i++) {
            const imageContainer = document.createElement("div");
            imageContainer.className = "output-image";

            const imageElement = document.createElement("img");
            imageElement.src = "data:image/png;base64," + images[i];
            imageElement.alt = "Generated Image";

            const bbox = bboxes[i];
            const bboxElement = document.createElement("div");
            bboxElement.style.border = "2px solid red";
            bboxElement.style.boxSizing = "border-box";
            bboxElement.style.position = "relative";
            bboxElement.style.width = bbox[2] - bbox[0] + "px";
            bboxElement.style.height = bbox[3] - bbox[1] + "px";
            bboxElement.style.left = bbox[0] + "px";
            bboxElement.style.top = bbox[1] + "px";

            imageContainer.appendChild(imageElement);
            imageContainer.appendChild(bboxElement);
            outputContainer.appendChild(imageContainer);
        }
    }
</script>

</body>
</html>
